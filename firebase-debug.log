[debug] [2025-06-25T13:04:24.573Z] ----------------------------------------------------------------------
[debug] [2025-06-25T13:04:24.576Z] Command:       C:\Program Files\nodejs\node.exe C:\Program Files\nodejs\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-06-25T13:04:24.577Z] CLI Version:   14.8.0
[debug] [2025-06-25T13:04:24.577Z] Platform:      win32
[debug] [2025-06-25T13:04:24.577Z] Node Version:  v22.11.0
[debug] [2025-06-25T13:04:24.577Z] Time:          Wed Jun 25 2025 15:04:24 GMT+0200 (MitteleuropÃ¤ische Sommerzeit)
[debug] [2025-06-25T13:04:24.577Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-06-25T13:04:24.766Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-25T13:04:24.766Z] > authorizing via signed-in user (s.kuehne@sk-online-marketing.de)
[debug] [2025-06-25T13:04:24.766Z] [iam] checking project skamp-prod for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-06-25T13:04:24.767Z] Checked if tokens are valid: false, expires at: 1750855919748
[debug] [2025-06-25T13:04:24.767Z] Checked if tokens are valid: false, expires at: 1750855919748
[debug] [2025-06-25T13:04:24.768Z] > refreshing access token with scopes: []
[debug] [2025-06-25T13:04:24.769Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-06-25T13:04:24.769Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-06-25T13:04:24.997Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-06-25T13:04:24.998Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-06-25T13:04:25.008Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions [none]
[debug] [2025-06-25T13:04:25.008Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions x-goog-quota-user=projects/skamp-prod
[debug] [2025-06-25T13:04:25.008Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-25T13:04:25.232Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions 200
[debug] [2025-06-25T13:04:25.232Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-25T13:04:25.232Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:25.233Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:25.233Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-06-25T13:04:25.233Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-06-25T13:04:26.025Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-06-25T13:04:26.026Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'skamp-prod'...
[info] 
[info] i  deploying functions 
[debug] [2025-06-25T13:04:26.030Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:26.030Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:26.030Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod [none]
[debug] [2025-06-25T13:04:26.241Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod 200
[debug] [2025-06-25T13:04:26.241Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod {"projectNumber":"184547460574","projectId":"skamp-prod","lifecycleState":"ACTIVE","name":"skamp-prod","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-23T06:38:52.139184Z","parent":{"type":"organization","id":"1020316406005"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-06-25T13:04:26.244Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:26.244Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:26.244Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/skamp-prod/adminSdkConfig [none]
[debug] [2025-06-25T13:04:26.594Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/skamp-prod/adminSdkConfig 200
[debug] [2025-06-25T13:04:26.594Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/skamp-prod/adminSdkConfig {"projectId":"skamp-prod","storageBucket":"skamp-prod.firebasestorage.app"}
[debug] [2025-06-25T13:04:26.594Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:26.594Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:26.594Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/skamp-prod/configs [none]
[debug] [2025-06-25T13:04:26.955Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/skamp-prod/configs 200
[debug] [2025-06-25T13:04:26.955Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/skamp-prod/configs {}
[debug] [2025-06-25T13:04:26.957Z] Validating nodejs source
[debug] [2025-06-25T13:04:27.895Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.7.3"
  },
  "private": true
}
[debug] [2025-06-25T13:04:27.896Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-06-25T13:04:27.897Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-06-25T13:04:27.907Z] Found firebase-functions binary at 'C:\Users\skuehne\Desktop\Projekt\skamp\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8860

[error] (node:15844) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-06-25T13:04:28.500Z] Got response from /__/functions.yaml {"endpoints":{"generatePressRelease":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["europe-west1"],"labels":{},"callableTrigger":{},"entryPoint":"generatePressRelease"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-06-25T13:04:32.533Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-25T13:04:32.533Z] > authorizing via signed-in user (s.kuehne@sk-online-marketing.de)
[debug] [2025-06-25T13:04:32.533Z] [iam] checking project skamp-prod for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-06-25T13:04:32.533Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:32.533Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:32.533Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions [none]
[debug] [2025-06-25T13:04:32.533Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions x-goog-quota-user=projects/skamp-prod
[debug] [2025-06-25T13:04:32.534Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-25T13:04:32.751Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions 200
[debug] [2025-06-25T13:04:32.752Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-25T13:04:32.752Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:32.752Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:32.752Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/skamp-prod/instances pageSize=100&pageToken=
[debug] [2025-06-25T13:04:33.648Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/skamp-prod/instances 200
[debug] [2025-06-25T13:04:33.648Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/skamp-prod/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\skuehne\Desktop\Projekt\skamp\functions (96.48 KB) for uploading 
[debug] [2025-06-25T13:04:33.691Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:33.691Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:33.691Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/skamp-prod/locations/-/functions [none]
[debug] [2025-06-25T13:04:34.487Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/skamp-prod/locations/-/functions 200
[debug] [2025-06-25T13:04:34.487Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/skamp-prod/locations/-/functions {}
[debug] [2025-06-25T13:04:34.488Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:34.488Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:34.488Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/skamp-prod/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-06-25T13:04:35.530Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/skamp-prod/locations/-/functions 200
[debug] [2025-06-25T13:04:35.530Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/skamp-prod/locations/-/functions {"functions":[{"name":"projects/skamp-prod/locations/europe-west1/functions/generatePressRelease","buildConfig":{"build":"projects/184547460574/locations/europe-west1/builds/1d7800f5-67a0-428b-8ec2-0e9b1ea2b628","runtime":"nodejs22","entryPoint":"generatePressRelease","source":{"storageSource":{"bucket":"gcf-v2-sources-184547460574-europe-west1","object":"generatePressRelease/function-source.zip","generation":"1750854569014064"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-184547460574-europe-west1","object":"generatePressRelease/function-source.zip","generation":"1750854569014064"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/skamp-prod/serviceAccounts/184547460574-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"state":"FAILED","updateTime":"2025-06-25T12:29:44.127003955Z","labels":{"firebase-functions-hash":"aba0bd25887dfc1dd32ae098320697e44a3382e8","deployment-tool":"cli-firebase","deployment-callable":"true"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/skamp-prod/locations/europe-west1/services/generatepressrelease for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://europe-west1-skamp-prod.cloudfunctions.net/generatePressRelease","createTime":"2025-06-25T12:29:29.377600619Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-06-25T13:04:35.535Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:35.535Z] Checked if tokens are valid: true, expires at: 1750860263998
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-06-25T13:04:35.535Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:35.536Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:35.536Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-25T13:04:35.536Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/184547460574
[debug] [2025-06-25T13:04:35.536Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-25T13:04:35.537Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-25T13:04:35.537Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/184547460574
[debug] [2025-06-25T13:04:35.537Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-25T13:04:36.513Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-25T13:04:36.513Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-184547460574@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"114497705350654491339"}}
[debug] [2025-06-25T13:04:36.552Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-25T13:04:36.552Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-184547460574@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"102327190410562335997"}}
[debug] [2025-06-25T13:04:36.553Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:36.554Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:36.554Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod [none]
[debug] [2025-06-25T13:04:36.760Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod 200
[debug] [2025-06-25T13:04:36.760Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod {"projectNumber":"184547460574","projectId":"skamp-prod","lifecycleState":"ACTIVE","name":"skamp-prod","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-23T06:38:52.139184Z","parent":{"type":"organization","id":"1020316406005"}}
[debug] [2025-06-25T13:04:36.760Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:36.760Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:36.760Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/184547460574 [none]
[debug] [2025-06-25T13:04:37.044Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/184547460574 403
[debug] [2025-06-25T13:04:37.044Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/184547460574 {"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"184547460574","consumer":"projects/184547460574","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574","service":"compute.googleapis.com","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}}
[debug] [2025-06-25T13:04:37.045Z] unable to look up default compute service account. Falling back to 184547460574-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"184547460574","consumer":"projects/184547460574","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574","service":"compute.googleapis.com","serviceTitle":"Compute Engine API"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/184547460574 had HTTP Error: 403, Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-25T13:04:37.045Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:37.045Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:37.045Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/184547460574 [none]
[debug] [2025-06-25T13:04:37.205Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/184547460574 403
[debug] [2025-06-25T13:04:37.205Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/184547460574 {"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/184547460574","containerInfo":"184547460574","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}}
[debug] [2025-06-25T13:04:37.205Z] unable to look up default compute service account. Falling back to 184547460574-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/184547460574","containerInfo":"184547460574","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/184547460574 had HTTP Error: 403, Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-25T13:04:37.206Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:37.206Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:37.206Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/skamp-prod/billingInfo [none]
[debug] [2025-06-25T13:04:37.562Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/skamp-prod/billingInfo 200
[debug] [2025-06-25T13:04:37.563Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/skamp-prod/billingInfo {"name":"projects/skamp-prod/billingInfo","projectId":"skamp-prod","billingAccountName":"billingAccounts/019F68-F7C6F0-AD8E4B","billingEnabled":true}
[info] i  functions: updating Node.js 22 (2nd Gen) function generatePressRelease(europe-west1)... 
[debug] [2025-06-25T13:04:37.566Z] Precondition failed. Cannot update a GCFv2 function without storage
[debug] [2025-06-25T13:04:37.571Z] Total Function Deployment time: 1
[debug] [2025-06-25T13:04:37.571Z] 1 Functions Deployed
[debug] [2025-06-25T13:04:37.571Z] 1 Functions Errored
[debug] [2025-06-25T13:04:37.571Z] 0 Function Deployments Aborted
[debug] [2025-06-25T13:04:37.571Z] Average Function Deployment time: 0
[info] 
[info] Functions deploy had errors with the following functions:
	generatePressRelease(europe-west1)
[debug] [2025-06-25T13:04:37.659Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:37.660Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:04:37.660Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts [none]
[debug] [2025-06-25T13:04:37.927Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts 200
[debug] [2025-06-25T13:04:37.927Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts {"name":"projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-06-25T10:38:37.499392Z","updateTime":"2025-06-25T10:39:51.749094Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"vulnerabilityScanningConfig":{"lastEnableTime":"2025-06-25T10:38:20.760351287Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"europe-west1-docker.pkg.dev/skamp-prod/gcf-artifacts"}
[debug] [2025-06-25T13:04:37.927Z] Functions deploy failed.
[debug] [2025-06-25T13:04:37.927Z] {}
[debug] [2025-06-25T13:04:37.957Z] Error: Precondition failed
    at Fabricator.updateV2Function (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:382:19)
    at Fabricator.updateEndpoint (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:24)
    at C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:110:71
    at handle (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:23)
    at Fabricator.applyChangeset (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:110:26)
    at C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:69:40
    at Array.map (<anonymous>)
    at Fabricator.applyPlan (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:68:54)
    at release (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\index.js:76:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-06-25T13:06:32.376Z] ----------------------------------------------------------------------
[debug] [2025-06-25T13:06:32.379Z] Command:       C:\Program Files\nodejs\node.exe C:\Program Files\nodejs\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --debug
[debug] [2025-06-25T13:06:32.380Z] CLI Version:   14.8.0
[debug] [2025-06-25T13:06:32.380Z] Platform:      win32
[debug] [2025-06-25T13:06:32.380Z] Node Version:  v22.11.0
[debug] [2025-06-25T13:06:32.380Z] Time:          Wed Jun 25 2025 15:06:32 GMT+0200 (MitteleuropÃ¤ische Sommerzeit)
[debug] [2025-06-25T13:06:32.380Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-06-25T13:06:32.582Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-25T13:06:32.582Z] > authorizing via signed-in user (s.kuehne@sk-online-marketing.de)
[debug] [2025-06-25T13:06:32.583Z] [iam] checking project skamp-prod for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-06-25T13:06:32.584Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:32.584Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:32.586Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions [none]
[debug] [2025-06-25T13:06:32.586Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions x-goog-quota-user=projects/skamp-prod
[debug] [2025-06-25T13:06:32.586Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-25T13:06:32.882Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions 200
[debug] [2025-06-25T13:06:32.883Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-06-25T13:06:32.885Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:32.885Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:32.885Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-06-25T13:06:32.886Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-06-25T13:06:33.128Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-06-25T13:06:33.128Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/skamp-prod/serviceAccounts/skamp-prod@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'skamp-prod'...
[info] 
[info] i  deploying functions 
[debug] [2025-06-25T13:06:33.133Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:33.133Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:33.134Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod [none]
[debug] [2025-06-25T13:06:33.402Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod 200
[debug] [2025-06-25T13:06:33.402Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod {"projectNumber":"184547460574","projectId":"skamp-prod","lifecycleState":"ACTIVE","name":"skamp-prod","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-23T06:38:52.139184Z","parent":{"type":"organization","id":"1020316406005"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-06-25T13:06:33.406Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:33.406Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:33.406Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/skamp-prod/adminSdkConfig [none]
[debug] [2025-06-25T13:06:33.719Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/skamp-prod/adminSdkConfig 200
[debug] [2025-06-25T13:06:33.719Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/skamp-prod/adminSdkConfig {"projectId":"skamp-prod","storageBucket":"skamp-prod.firebasestorage.app"}
[debug] [2025-06-25T13:06:33.720Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:33.721Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:33.721Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/skamp-prod/configs [none]
[debug] [2025-06-25T13:06:34.003Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/skamp-prod/configs 200
[debug] [2025-06-25T13:06:34.003Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/skamp-prod/configs {}
[debug] [2025-06-25T13:06:34.005Z] Validating nodejs source
[debug] [2025-06-25T13:06:34.776Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.7.3"
  },
  "private": true
}
[debug] [2025-06-25T13:06:34.777Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-06-25T13:06:34.780Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-06-25T13:06:34.790Z] Found firebase-functions binary at 'C:\Users\skuehne\Desktop\Projekt\skamp\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8485

[error] (node:21608) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-06-25T13:06:35.373Z] Got response from /__/functions.yaml {"endpoints":{"generatePressRelease":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["europe-west1"],"labels":{},"callableTrigger":{},"entryPoint":"generatePressRelease"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-06-25T13:06:39.408Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-06-25T13:06:39.409Z] > authorizing via signed-in user (s.kuehne@sk-online-marketing.de)
[debug] [2025-06-25T13:06:39.409Z] [iam] checking project skamp-prod for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-06-25T13:06:39.409Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:39.410Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:39.410Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions [none]
[debug] [2025-06-25T13:06:39.410Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions x-goog-quota-user=projects/skamp-prod
[debug] [2025-06-25T13:06:39.411Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-25T13:06:40.136Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions 200
[debug] [2025-06-25T13:06:55.316Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-06-25T13:06:55.318Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:55.318Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:55.319Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/skamp-prod/instances pageSize=100&pageToken=
[debug] [2025-06-25T13:06:56.155Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/skamp-prod/instances 200
[debug] [2025-06-25T13:06:56.156Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/skamp-prod/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\skuehne\Desktop\Projekt\skamp\functions (96.48 KB) for uploading 
[debug] [2025-06-25T13:06:56.197Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:56.197Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:56.197Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/skamp-prod/locations/-/functions [none]
[debug] [2025-06-25T13:06:56.798Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/skamp-prod/locations/-/functions 200
[debug] [2025-06-25T13:06:56.799Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/skamp-prod/locations/-/functions {}
[debug] [2025-06-25T13:06:56.799Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:56.800Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:56.801Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/skamp-prod/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-06-25T13:06:57.849Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/skamp-prod/locations/-/functions 200
[debug] [2025-06-25T13:06:57.849Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/skamp-prod/locations/-/functions {"functions":[{"name":"projects/skamp-prod/locations/europe-west1/functions/generatePressRelease","buildConfig":{"build":"projects/184547460574/locations/europe-west1/builds/1d7800f5-67a0-428b-8ec2-0e9b1ea2b628","runtime":"nodejs22","entryPoint":"generatePressRelease","source":{"storageSource":{"bucket":"gcf-v2-sources-184547460574-europe-west1","object":"generatePressRelease/function-source.zip","generation":"1750854569014064"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-184547460574-europe-west1","object":"generatePressRelease/function-source.zip","generation":"1750854569014064"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/skamp-prod/serviceAccounts/184547460574-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"state":"FAILED","updateTime":"2025-06-25T12:29:44.127003955Z","labels":{"firebase-functions-hash":"aba0bd25887dfc1dd32ae098320697e44a3382e8","deployment-tool":"cli-firebase","deployment-callable":"true"},"stateMessages":[{"severity":"ERROR","type":"CloudRunServiceNotFound","message":"Cloud Run service projects/skamp-prod/locations/europe-west1/services/generatepressrelease for the function was not found. The function will not work correctly. Please redeploy."}],"environment":"GEN_2","url":"https://europe-west1-skamp-prod.cloudfunctions.net/generatePressRelease","createTime":"2025-06-25T12:29:29.377600619Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-06-25T13:06:57.858Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:57.859Z] Checked if tokens are valid: true, expires at: 1750860263998
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-06-25T13:06:57.860Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:57.861Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:57.862Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-25T13:06:57.864Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/184547460574
[debug] [2025-06-25T13:06:57.866Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-25T13:06:57.868Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-06-25T13:06:57.868Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/184547460574
[debug] [2025-06-25T13:06:57.868Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-06-25T13:06:58.817Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-25T13:06:58.817Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-184547460574@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"114497705350654491339"}}
[debug] [2025-06-25T13:06:58.866Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-06-25T13:06:58.867Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/184547460574/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-184547460574@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"102327190410562335997"}}
[debug] [2025-06-25T13:06:58.870Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:58.870Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:58.871Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod [none]
[debug] [2025-06-25T13:06:59.145Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod 200
[debug] [2025-06-25T13:06:59.146Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/skamp-prod {"projectNumber":"184547460574","projectId":"skamp-prod","lifecycleState":"ACTIVE","name":"skamp-prod","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-06-23T06:38:52.139184Z","parent":{"type":"organization","id":"1020316406005"}}
[debug] [2025-06-25T13:06:59.147Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.149Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.150Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/184547460574 [none]
[debug] [2025-06-25T13:06:59.364Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/184547460574 403
[debug] [2025-06-25T13:06:59.364Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/184547460574 {"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"serviceTitle":"Compute Engine API","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574","containerInfo":"184547460574","consumer":"projects/184547460574"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}}
[debug] [2025-06-25T13:06:59.366Z] unable to look up default compute service account. Falling back to 184547460574-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"serviceTitle":"Compute Engine API","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574","containerInfo":"184547460574","consumer":"projects/184547460574"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/184547460574 had HTTP Error: 403, Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-25T13:06:59.368Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.368Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.369Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/184547460574 [none]
[debug] [2025-06-25T13:06:59.527Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/184547460574 403
[debug] [2025-06-25T13:06:59.528Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/184547460574 {"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"184547460574","serviceTitle":"Compute Engine API","consumer":"projects/184547460574","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574","service":"compute.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}}
[debug] [2025-06-25T13:06:59.529Z] unable to look up default compute service account. Falling back to 184547460574-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"containerInfo":"184547460574","serviceTitle":"Compute Engine API","consumer":"projects/184547460574","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574","service":"compute.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/184547460574 had HTTP Error: 403, Compute Engine API has not been used in project 184547460574 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=184547460574 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-06-25T13:06:59.532Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.532Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.533Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/skamp-prod/billingInfo [none]
[debug] [2025-06-25T13:06:59.812Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/skamp-prod/billingInfo 200
[debug] [2025-06-25T13:06:59.812Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/skamp-prod/billingInfo {"name":"projects/skamp-prod/billingInfo","projectId":"skamp-prod","billingAccountName":"billingAccounts/019F68-F7C6F0-AD8E4B","billingEnabled":true}
[info] i  functions: updating Node.js 22 (2nd Gen) function generatePressRelease(europe-west1)... 
[debug] [2025-06-25T13:06:59.817Z] Precondition failed. Cannot update a GCFv2 function without storage
[debug] [2025-06-25T13:06:59.821Z] Total Function Deployment time: 1
[debug] [2025-06-25T13:06:59.821Z] 1 Functions Deployed
[debug] [2025-06-25T13:06:59.822Z] 1 Functions Errored
[debug] [2025-06-25T13:06:59.824Z] 0 Function Deployments Aborted
[debug] [2025-06-25T13:06:59.824Z] Average Function Deployment time: 0
[info] 
[info] Functions deploy had errors with the following functions:
	generatePressRelease(europe-west1)
[debug] [2025-06-25T13:06:59.945Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.946Z] Checked if tokens are valid: true, expires at: 1750860263998
[debug] [2025-06-25T13:06:59.947Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts [none]
[debug] [2025-06-25T13:07:00.156Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts 200
[debug] [2025-06-25T13:07:00.157Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts {"name":"projects/skamp-prod/locations/europe-west1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-06-25T10:38:37.499392Z","updateTime":"2025-06-25T10:39:51.749094Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"vulnerabilityScanningConfig":{"lastEnableTime":"2025-06-25T10:38:20.760351287Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"europe-west1-docker.pkg.dev/skamp-prod/gcf-artifacts"}
[debug] [2025-06-25T13:07:00.158Z] Functions deploy failed.
[debug] [2025-06-25T13:07:00.160Z] {}
[debug] [2025-06-25T13:07:00.192Z] Error: Precondition failed
    at Fabricator.updateV2Function (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:382:19)
    at Fabricator.updateEndpoint (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:24)
    at C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:110:71
    at handle (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:23)
    at Fabricator.applyChangeset (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:110:26)
    at C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:69:40
    at Array.map (<anonymous>)
    at Fabricator.applyPlan (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:68:54)
    at release (C:\Users\skuehne\AppData\Roaming\nvm\v22.11.0\node_modules\firebase-tools\lib\deploy\functions\release\index.js:76:31)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[error] 
[error] Error: There was an error deploying functions
